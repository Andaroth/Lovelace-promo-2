<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Maths</title>
</head>
<body>

	<p>Regarde la console</p>
	
	<script>

		/****************
			EXERCICE 1
		*****************/

		let character = {
			name : "Teddy",
			age : 29,
			items_to_give : ["Épée","couteau","pierre"],
			giveItem : function(){
				let key = Math.floor(Math.random() * this.items_to_give.length);
				return this.items_to_give[key];
			}
		}

		for(let key in character){
			console.log( key + " : " + character[key] );
		}

		let object_received = character.giveItem();

		console.log(character.name + " vous donne " +  object_received );

		/****************
			EXERCICE 2
		*****************/

		let shop = [
			{ title : "épée", physic : 2, magic : 5, minLevel : 1, available : true },
			{ title : "hache", physic : 3, magic : 10, minLevel : 3, available : false },
			{ title : "sceptre", physic : 4, magic : 15, minLevel : 6, available : true }
		]

		let display_objects = function(){
			for (var i = 0; i < shop.length; i++) {
				console.log( shop[i] );
			}
		}

		let display_available_objects = function(){
			for (var i = 0; i < shop.length; i++) {
				if(shop[i].available){
					console.log( shop[i] );
				}
			}
		}

		let display_level_objects = function(){
			for (var i = 0; i < shop.length; i++) {
				if(shop[i].minLevel <= 10){
					console.log( shop[i] );
				}
			}
		}

		console.log("----display_objects----");
		display_objects();

		console.log("----display_available_objects----");
		display_available_objects();

		console.log("----display_level_objects----");
		display_level_objects();


		/****************
			EXERCICE 3
		*****************/

		let mainCharacter = {
			name : "Barret",
			level : 10,
			life : 100,
			weapon : {
				name : "Hand Gun",
				damage : 3
			},
			attack : function(){
				let total_damage = this.level * this.weapon.damage;
				return this.name + " attaque avec l'arme " + this.weapon.name + " les dégâts sont " +  total_damage + " points.";
			}
		}

		console.log( mainCharacter.attack() );

		/****************
			EXERCICE 4 : Bonus
		*****************/

		let Character = {
			name : "",
			level : 1,
			life : 100,
			weapon : {
				name : "Épée",
				damage : 3
			},
			attack : function(opponent){

				let total_damage = this.level * this.weapon.damage;

				opponent.receiveDamage( total_damage );

				console.log( this.name + " attaque " + opponent.name + " avec l'arme " + this.weapon.name + "." );
				console.log("Il lui inflige " + total_damage + " points de dégats.");
				console.log(opponent.name + " a maintenant " + opponent.life + " de vie");

			},
			receiveDamage : function(damage){

				this.life = this.life - damage;

			}
		}

		let heroCharacter = Object.create(Character);
		let opponentCharacter = Object.create(Character);

			heroCharacter.name = "Séphiroth";
			heroCharacter.level = 5;

			opponentCharacter.name = "Cloud";
			opponentCharacter.level = 3;

		heroCharacter.attack(opponentCharacter);

		console.log( heroCharacter );
		console.log( opponentCharacter );


	</script>
</body>
</html>
